<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setting</title>
    <link rel="icon" type="image/x-icon" href="./asset/SVG/Artboard 1.svg">
    <link href="./reset.css" rel="stylesheet">
    <link href="./setting_style.css" rel="stylesheet">
    <script type="text/javascript" src="setting_script.js" defer></script>
</head>
<body>
 
        <!-- side-bar -->
     <!-- tren -->
     <section class="side-bar">
      <ul class="container">
          <li class="item" id="avatar"><a href="#"><img src="asset/SVG/avatar.svg" height="40"/></a></li>
          <li class="item" id="menu"><a href="#"><img src="asset/SVG/menu.svg" height="40"/></a></li>
          
          <li class="item" id="bus"><a href="home.html"><img src="asset/SVG/busandcar_yellow.svg" height="40"/></a></li>
          <li class="item" id="dish"><a href="#"><img src="asset/SVG/dish.svg" height="40"/></a></li>
          
      </ul>
      <!-- duoi -->
      <ul class="container1" id="setting-container">
        <li class="item" id="setting"><a href="./setting1.html"><img src="asset/SVG/setting.svg" height="40"/></a></li>
      </ul>
   </section>
  <!-- navigation -->
  <section class="nav-container">
    <div class="tab-container">
        <input type="radio" name="tab" id="tab1" class="tab tab--1" />
        <label class="tab_label" for="tab1">Xe 1</label>
      
        <input type="radio" name="tab" id="tab2" class="tab tab--2" />
        <label class="tab_label" for="tab2">Xe 2</label>
      
        <input type="radio" name="tab" id="tab3" class="tab tab--3" />
        <label class="tab_label" for="tab3">Xe 3</label>
         <input type="radio" name="tab" id="tab4" class="tab tab--4" />
        <label class="tab_label" for="tab4">Xe 4</label>
      
        <div class="indicator"></div>
      </div>
     <section class="clock">
      <p><span id="hour"></span>:<span id="minute"></span></p>
      
     </section> 
    

  </section>
  <!--main 1  -->
  <section class="main" id="main1">
    <h2>Xe 1: Mô phỏng vân tay</h2>
    <form class="form" id="form">
        <button id="send" title="Send">➤</button>
      <input class="input" id="messageBox" style="font-size:1.2rem; color:#b78d6d;text-align:center"  placeholder="Nhập số thứ tự của học sinh ..." required="" type="text">
      <button class="reset" type="reset">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
      </button>
  </form>
  <table id="table1">
    <tr class="table_head">
        <th scope="col">Số thứ tự</th>
        <th scope="col">Tên</th>
        <th scope="col">Vân tay</th>   
    </tr>
    <tr id="_1">
        <td>1</td>
        <td>Lưu Thịnh Khang</td>
        <td><img src="asset/vantay6.jpg"/></td>
    </tr>
    <tr id="_2">
        <td>2</td>
        <td>khang2</td>
        <td><img src="asset/vantay2.jpg"/></td>
    </tr>
    <tr id="_3">
        <td>3</td>
        <td>khang</td>
        <td><img src="asset/vantay3.jpg"/></td>
    </tr>
    <tr id="_4">
        <td>4</td>
        <td>khang</td>
        <td><img src="asset/vantay4.jpg"/></td>
    </tr>
    <tr id="_5">
        <td>5</td>
        <td>khang</td>
        <td><img src="asset/vantay5.jpg"/></td>
    </tr>
    <tr id="_6">
        <td>6</td>
        <td>khang</td>
        <td><img src="asset/vantay6.jpg"/></td>
    </tr>
    <tr id="_7">
        <td>7</td>
        <td>khang</td>
        <td><img src="asset/vantay7.jpg"/></td>
    </tr>
    <tr id="_8">
        <td>8</td>
        <td>khang</td>
        <td><img src="asset/vantay5.jpg"/></td>
    </tr>
    <tr id="_9">
        <td>9</td>
        <td>khang</td>
        <td><img src="asset/vantay4.jpg"/></td>
    </tr>
    <tr id="_10">
        <td>10</td>
        <td>khang</td>
        <td><img src="asset/vantay8.jpg"/></td>
    </tr>
   
</table>
   
  </section>
  <!--main2  -->
  <section class="main" id="main2">
    <h2>Xe 2: Mô phỏng vân tay</h2>
    <form class="form" id="form2">
        <button id="send2" title="Send">➤</button>
      <input class="input" id="messageBox2" style="font-size:1.2rem; color:#b78d6d;text-align:center"  placeholder="Nhập số thứ tự của học sinh ..." required="" type="text">
      <button class="reset" type="reset">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
      </button>
  </form>
  <table id="table2">
    <tr class="table_head">
        <th scope="col">Số thứ tự</th>
        <th scope="col">Tên</th>
        <th scope="col">Vân tay</th>   
    </tr>
    <tr>
        <td>1</td>
        <td>Lưu Thịnh Khang 2</td>
        <td><img src="asset/vantay6.jpg"/></td>
    </tr>
    <tr>
        <td>2</td>
        <td>khang2</td>
        <td><img src="asset/vantay2.jpg"/></td>
    </tr>
    <tr>
        <td>3</td>
        <td>khang2</td>
        <td><img src="asset/vantay3.jpg"/></td>
    </tr>
    <tr>
        <td>4</td>
        <td>khang</td>
        <td><img src="asset/vantay4.jpg"/></td>
    </tr>
    <tr>
        <td>5</td>
        <td>khang</td>
        <td><img src="asset/vantay5.jpg"/></td>
    </tr>
    <tr>
        <td>6</td>
        <td>khang</td>
        <td><img src="asset/vantay6.jpg"/></td>
    </tr>
    <tr>
        <td>7</td>
        <td>khang</td>
        <td><img src="asset/vantay7.jpg"/></td>
    </tr>
    <tr>
        <td>8</td>
        <td>khang</td>
        <td><img src="asset/vantay5.jpg"/></td>
    </tr>
    <tr>
        <td>9</td>
        <td>khang</td>
        <td><img src="asset/vantay4.jpg"/></td>
    </tr>
    <tr>
        <td>10</td>
        <td>khang</td>
        <td><img src="asset/vantay8.jpg"/></td>
    </tr>
   
</table>
   
  </section>
   
<!-- script1 -->
  <script>
   
    function Time(){
    let hour = document.getElementById("hour"); 
  let d=new Date();
  hour.innerHTML=update(d.getHours());
  document.getElementById('minute').innerHTML=update(d.getMinutes());
  setTimeout(Time, 1000);
  }
  Time()
function update(time){
  time=(time<10)? '0'+time:time;
  return time;
}
//chuc nang chinh
// nhap vao hang de chon nhanh
function show(row){
  let text=row.cells[0].innerText;
  
  document.getElementById('messageBox').value=text;
  
}
let rows=document.querySelectorAll('#table1 tr');

let i=0;
rows.forEach((row)=>{
  row.addEventListener('click',function(){
    show(this)
  })})
    let clientServer = new WebSocket('ws://localhost:8080')
    let form1 =document.getElementById('form');
    let input = document.getElementById('messageBox');
    form1.onsubmit = (e)=>{
        e.preventDefault();
        let message = input.value;
        if(Number(message)>0 && Number(message)<11){
           sendMessageToServer(message);
           checkin1[Number(message)-1]=1-checkin1[Number(message)-1];
        }
        else {
            window.alert('Bạn cần nhập số từ 1 đến 10')
        }
        input.value='';
        

    }
    
    clientServer.onclose = (event) => {
        
       clientServer = null;
      }

      // .onerror is executed when error event occurs on the WebSocket connection
      clientServer.onerror = (event) => {
     
       clientServer = null;
      }
      let checkin1=new Array(10);
      checkin1.fill(0);
     const sendMessageToServer= (message)=>{
        let d=new Date();
        let h=d.getHours();
        let m =d.getMinutes();
        let s=d.getSeconds();
        let newMessage={
                type:'NEW_MESSAGE',
                payload: {message:message,
                            hour:String(h),
                            minute:String(m),
                            second:String(s),
                            checkin:checkin1[Number(message)-1]
                }
            }
            clientServer.send(JSON.stringify(newMessage)); 
     }
     //nav
     const tabs=document.querySelectorAll('input[name="tab"]');
     const main1=document.getElementById("main1");
     const main2=document.getElementById("main2");
     const main3=document.getElementById("main3");
     const main4=document.getElementById("main4");
     function handleTabChange(){
        if(document.getElementById('tab1').checked){
            main1.style.display='block';
            main2.style.display='none';
            main3.style.display='none';
            main4.style.display='none';
        }
        if(document.getElementById('tab2').checked){
            main1.style.display='none';
            main2.style.display='block';
            main3.style.display='none';
            main4.style.display='none';
        }
        if(document.getElementById('tab3').checked){
            main1.style.display='none';
            main2.style.display='none';
            main3.style.display='block';
            main4.style.display='none';
        }
        if(document.getElementById('tab4').checked){
            main1.style.display='none';
            main2.style.display='none';
            main3.style.display='none';
            main4.style.display='block';
        }
     }
     tabs.forEach(tab=>{
        tab.addEventListener('change', handleTabChange);
     })
     handleTabChange();
  
  <!-- script2 -->
 
    function show2(row){
  let text=row.cells[0].innerText;
  
  document.getElementById('messageBox2').value=text;
  
}
let rows2=document.querySelectorAll('#table2 tr');


rows2.forEach((row)=>{
  row.addEventListener('click',function(){
    show2(this)
  })})
   
    let form2 =document.getElementById('form2');
    let input2 = document.getElementById('messageBox2');
    form2.onsubmit = (e)=>{
        e.preventDefault();
        let message = input2.value;
        if(Number(message)>0 && Number(message)<11){
           sendMessageToServer2(message);
           checkin2[Number(message)-1]=1-checkin2[Number(message)-1];
        }
        else {
            window.alert('Bạn cần nhập số từ 1 đến 10')
        }
        input2.value='';
        

    }
    
    clientServer.onclose = (event) => {
        
       clientServer = null;
      }

      // .onerror is executed when error event occurs on the WebSocket connection
      clientServer.onerror = (event) => {
     
       clientServer = null;
      }
    let checkin2=new Array(10);
    checkin2.fill(0);

     const sendMessageToServer2= (message)=>{
        let d=new Date();
        let h=d.getHours();
        let m =d.getMinutes();
        let s=d.getSeconds();
        let newMessage={
                type:'NEW_MESSAGE_2',
                payload: {message:message,
                            hour:String(h),
                            minute:String(m),
                            second:String(s),
                            checkin:checkin2[Number(message)-1]
                }
            }
            clientServer.send(JSON.stringify(newMessage)); 
     }
  </script>
  </script>
  
   


</body>
</html>